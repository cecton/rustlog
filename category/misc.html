<!DOCTYPE html>
<html lang="en">
<head>
        <title>Rustlog - misc</title>
        <meta charset="utf-8" />
        <link rel="stylesheet" href="../theme/css/main.css" type="text/css" />
        <link href="../" type="application/atom+xml" rel="alternate" title="Rustlog ATOM Feed" />

        <!--[if IE]>
                <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

        <!--[if lte IE 7]>
                <link rel="stylesheet" type="text/css" media="all" href="../css/ie.css"/>
                <script src="../js/IE8.js" type="text/javascript"></script><![endif]-->

        <!--[if lt IE 7]>
                <link rel="stylesheet" type="text/css" media="all" href="../css/ie6.css"/><![endif]-->

</head>

<body>
        
        

            <header>
                <h1><a href="../worklog-2014-12-08.html" id="page-title">Worklog 2014-12-08</a></h1>
                <span id="sitename"><a href=".." id="site-title">Rustlog </a> &sdot;</span>
<time datetime="2014-12-09T02:51:00+09:00">2014-12-09 02:51 +09:00</time>            </header>

            <article>
                <p>After some wrestling with rustc, I've taken some refresh.
I had a grand^Wstupid plan for improving <a href="https://crates.io/crates/an">an</a>,
by implementing a better spell-to-pronounciation algorithm and
using that to determine if the word starts with a vowel or not.
(Mostly for fun, but I also wanted to make some useful utility.)
I've now implemented an entirety of <a href="http://zompist.com/spell.html">Mark Rosenfelder's algorithm</a>
which has some test code like this:</p>
<div class="highlight"><pre><span class="n">assert_eq</span><span class="o">!</span><span class="p">(</span><span class="n">spell_to_sound</span><span class="p">(</span><span class="s">&quot;coffee&quot;</span><span class="p">).</span><span class="n">as_slice</span><span class="p">(),</span><span class="w"> </span><span class="s">&quot;kòfë&quot;</span><span class="p">);</span><span class="w"></span>
<span class="n">assert_eq</span><span class="o">!</span><span class="p">(</span><span class="n">spell_to_sound</span><span class="p">(</span><span class="s">&quot;market&quot;</span><span class="p">).</span><span class="n">as_slice</span><span class="p">(),</span><span class="w"> </span><span class="s">&quot;môrkêt&quot;</span><span class="p">);</span><span class="w"></span>
<span class="n">assert_eq</span><span class="o">!</span><span class="p">(</span><span class="n">spell_to_sound</span><span class="p">(</span><span class="s">&quot;ugly&quot;</span><span class="p">).</span><span class="n">as_slice</span><span class="p">(),</span><span class="w"> </span><span class="s">&quot;ûglë&quot;</span><span class="p">);</span><span class="w"></span>
<span class="n">assert_eq</span><span class="o">!</span><span class="p">(</span><span class="n">spell_to_sound</span><span class="p">(</span><span class="s">&quot;high&quot;</span><span class="p">).</span><span class="n">as_slice</span><span class="p">(),</span><span class="w"> </span><span class="s">&quot;hï&quot;</span><span class="p">);</span><span class="w"></span>
<span class="n">assert_eq</span><span class="o">!</span><span class="p">(</span><span class="n">spell_to_sound</span><span class="p">(</span><span class="s">&quot;canal&quot;</span><span class="p">).</span><span class="n">as_slice</span><span class="p">(),</span><span class="w"> </span><span class="s">&quot;känâl&quot;</span><span class="p">);</span><span class="w"></span>
</pre></div>


<p>...Well, it still fails for some dozens of cases but it looks nice.
(Here I really mean that this doesn't exactly match the known output of the algorithm.
Since the algorithm itself is approximate,
if the bug actually <em>improves</em> the error rate, I might leave it as is.)</p>            </article>
                <section id="article-list">
                    <h2>List of articles</h2>
                    <ol>
        

 
            <li><a href="../worklog-2014-12-06.html" rel="bookmark" title="Permalink to Worklog 2014-12-06">Worklog 2014-12-06</a></li>
        

 
            <li><a href="../the-beginning.html" rel="bookmark" title="Permalink to The Beginning">The Beginning</a></li>
    </ol>
    </section><!-- #article-list -->

        <footer>
            <nav>
                <ul>
                </ul>
            </nav>
                <p id="theme-credit">Proudly powered by <a href="http://docs.notmyidea.org/alexis/pelican/">pelican</a></p>
        </footer>

</body>
</html>